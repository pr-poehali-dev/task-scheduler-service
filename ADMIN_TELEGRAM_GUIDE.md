# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ **@BotFather** –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –ù–∞–∑–æ–≤–∏—Ç–µ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "TaskFlow –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è")  
4. –ó–∞–¥–∞–π—Ç–µ username (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ "bot")
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

### 2. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ poehali.dev:
1. –ù–∞–π–¥–∏—Ç–µ –≤–∏–¥–∂–µ—Ç "–°–µ–∫—Ä–µ—Ç—ã"
2. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç `TELEGRAM_BOT_TOKEN`
3. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ BotFather

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É (–∑–∞–º–µ–Ω–∏—Ç–µ `<–¢–û–ö–ï–ù>` –Ω–∞ –≤–∞—à):

```bash
curl -X POST "https://api.telegram.org/bot<–¢–û–ö–ï–ù>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://functions.poehali.dev/4ce7411a-e9ec-4a29-942e-dd87c76d49d5"}'
```

### 4. –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –∫–æ–≥–¥–∞ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –∑–∞–¥–∞—á—É –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç–µ –µ—ë —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É:
- ‚úÖ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
- ‚úÖ –°–º–æ–∂–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –ø—Ä—è–º–æ –≤ –±–æ—Ç–µ
- ‚úÖ –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∑–∞—Ö–æ–¥–∏—Ç –≤ –ü—Ä–æ—Ñ–∏–ª—å ‚Üí –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram"
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –ø—Ä–∏–¥—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ```
   üî• –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

   üìã –ù–∞–∑–≤–∞–Ω–∏–µ: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç
   üìÖ –°—Ä–æ–∫: 2025-01-25  
   üìä –°—Ç–∞—Ç—É—Å: –í —Ä–∞–±–æ—Ç–µ
   üë§ –û—Ç –∫–æ–≥–æ: –ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤

   [‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π]
   ```
3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ—á–∞–µ—Ç –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –≤–µ–∑–¥–µ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook:
```bash
curl "https://api.telegram.org/bot<–¢–û–ö–ï–ù>/getWebhookInfo"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```json
{
  "ok": true,
  "result": {
    "url": "https://functions.poehali.dev/4ce7411a-e9ec-4a29-942e-dd87c76d49d5",
    "has_custom_certificate": false,
    "pending_update_count": 0
  }
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Telegram —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ–∏–ª—å
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É –∏ –Ω–∞–∑–Ω–∞—á—å—Ç–µ –µ—ë —ç—Ç–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
3. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
4. –ü—É—Å—Ç—å –æ—Ç–º–µ—Ç–∏—Ç –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –≤ Telegram
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥–∫–ª—é—á–∏–ª –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ–∏–ª—å |
| –ó–∞–¥–∞—á–∏ –Ω–µ –æ—Ç–º–µ—á–∞—é—Ç—Å—è | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `telegram-bot` |
| Webhook –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω | –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É setWebhook |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
     ‚Üì (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏)
notify-task ‚Üí Telegram API ‚Üí –ë–æ—Ç ‚Üí –°–æ—Ç—Ä—É–¥–Ω–∏–∫
     
–°–æ—Ç—Ä—É–¥–Ω–∏–∫ ‚Üí –ë–æ—Ç ‚Üí telegram-bot ‚Üí –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
                      ‚Üì
                 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend —Ñ—É–Ω–∫—Ü–∏–∏:
- `telegram-bot` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook Telegram
- `notify-task` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- `sync-task` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏
- `save-task` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –ë–î

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- `users.telegram_chat_id` - ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `tasks` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á
- `task_assignments` - —Å–≤—è–∑—å –∑–∞–¥–∞—á —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω–∏ –±–æ—Ç–∞

–í —Ñ–∞–π–ª–µ `src/components/TelegramConnect.tsx` –∏–∑–º–µ–Ω–∏—Ç–µ:
```typescript
const botUsername = '–≤–∞—à_–±–æ—Ç_username';
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `backend/notify-task/index.py`, —Ä–∞–∑–¥–µ–ª `message_text`.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –±–æ—Ç—É

–†–∞—Å—à–∏—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `backend/telegram-bot/index.py` –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥.
