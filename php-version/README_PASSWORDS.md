# Инструкция по паролям TaskFlow

## Проблема с входом в систему

Если вы не можете войти в систему с паролем `admin123`, выполните следующие шаги:

### Шаг 1: Откройте в браузере

```
http://ваш-домен/test-password.php
```

Эта страница автоматически:
- Создаст новые хеши паролей
- Обновит пароли для всех тестовых пользователей
- Проверит правильность паролей

### Шаг 2: Тестовые аккаунты

После выполнения скрипта вы сможете войти со следующими данными:

#### Администратор
- **Email:** admin@taskflow.com
- **Пароль:** admin123
- **Роль:** admin

#### Менеджер
- **Email:** manager@taskflow.com
- **Пароль:** admin123
- **Роль:** manager

#### Обычный пользователь
- **Email:** user@taskflow.com
- **Пароль:** admin123
- **Роль:** user

### Шаг 3: Удалите тестовый файл

После успешного входа **удалите файл** `test-password.php` из соображений безопасности:

```bash
rm test-password.php
```

Или через файловый менеджер хостинга.

---

## Создание нового пользователя

Вы можете зарегистрировать нового пользователя через форму регистрации:

1. Откройте `/register.php`
2. Заполните форму (имя, email, пароль)
3. После регистрации вы автоматически войдёте в систему

---

## Сброс пароля через phpMyAdmin

Если вам нужно вручную сбросить пароль через phpMyAdmin:

1. Откройте phpMyAdmin
2. Выберите базу данных `taskflow_db`
3. Откройте таблицу `users`
4. Найдите нужного пользователя
5. В поле `password_hash` вставьте один из этих хешей:

**Хеш для пароля "admin123":**
```
$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi
```

**Или сгенерируйте новый:**

```php
<?php
echo password_hash('ваш_пароль', PASSWORD_DEFAULT);
?>
```

---

## Проверка работы авторизации

1. Откройте `/login.php`
2. Введите email и пароль
3. Нажмите "Войти"
4. Вы должны попасть на главную страницу `/index.php`

Если возникает ошибка "Неверный email или пароль" - выполните **Шаг 1** выше.

---

## Техническая информация

- **Алгоритм хеширования:** bcrypt (PASSWORD_DEFAULT в PHP)
- **Функция проверки:** `password_verify($password, $hash)`
- **Сессии:** PHP sessions с токенами в таблице `sessions`
- **Срок действия токена:** 30 дней

---

## Безопасность

⚠️ **ВАЖНО:** После настройки системы:

1. Удалите файл `test-password.php`
2. Смените пароли всех тестовых пользователей
3. Удалите неиспользуемых пользователей
4. Используйте сложные пароли в production

---

## Поддержка

Если проблемы с входом сохраняются:

1. Проверьте логи PHP: `/logs/error.log`
2. Проверьте соединение с базой данных
3. Убедитесь, что таблица `users` содержит записи
4. Проверьте, что поле `is_active = 1` для пользователя
